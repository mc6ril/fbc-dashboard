# Apply Perifit Rules

Use this prompt to ensure code strictly follows all Perifit Pump project rules and conventions.

## Prompt

Review the following code/change and ensure it strictly adheres to all Perifit Pump rules:

**[Paste code or describe the change here]**

Please verify compliance with:

1. **Architecture Rules**:

   - ✅ BLE data flows through handlers → EventService → Helpers → Redux → UI
   - ✅ Services obtained via ServiceProvider (no direct instantiation)
   - ✅ Helpers obtained via HelperProvider
   - ✅ Services communicate via EventService only
   - ✅ Redux for all global state
   - ✅ Settings module for all storage (no direct AsyncStorage)

2. **Code Quality Rules**:

   - ✅ Import order: React → third-party → internal → relative
   - ✅ Path aliases used (services/, helpers/, components/)
   - ✅ Explicit return types on all functions
   - ✅ Types (not interfaces) for component props
   - ✅ Comprehensive JSDoc comments
   - ✅ Error handling with try-catch and logging

3. **UI Rules**:

   - ✅ Design system components from @perifit/app-design-system
   - ✅ No inline styles (use styles.ts)
   - ✅ Design system tokens (spacing, colors, radius)
   - ✅ Typography component (not React Native Text)
   - ✅ Full accessibility (IDs, roles, labels, hints)

4. **Internationalization**:

   - ✅ All user-facing text via Resx from modules/localisation
   - ✅ Only modify en.json
   - ✅ Descriptive camelCase keys

5. **Performance**:

   - ✅ React.memo for expensive components
   - ✅ useCallback for event handlers
   - ✅ useMemo for expensive calculations
   - ✅ Listener cleanup in useEffect

6. **Testing**:
   - ✅ Tests in **tests**/ directory (not in src/)
   - ✅ Unit tests for helpers/services/utils/redux only
   - ✅ No UI component tests

If any violations are found:

- **STOP** and list all violations
- Explain why each violates the rules
- Suggest corrections before proceeding

If compliant, confirm and proceed with implementation.
