---
name: "Ask Before Coding"
description: "Discuss and validate an approach before any implementation. No code output."
tags: ["design", "architecture", "planning", "tdd", "review"]
# Reusable prompt template (not a command)
---

# Ask Before Coding

Use this when you want to **discuss and validate** an approach _before_ implementing it.  
**Do NOT write any production code yet.** We only analyze, question, and outline.

## Inputs (fill below)

-   **What I want to implement / problem to solve:** â€¦
-   **Context / constraints:** (deadlines, platforms, legacy, PII/RGPD, etc.)
-   **Existing modules touched:** (domain, usecases, repositories, hooks, components)
-   **User impact & success signals:** â€¦
-   **Open questions / uncertainties:** â€¦

## Consider fbc-dashboard rules

-   Clean Architecture: **Domain â†’ Usecases â†’ Infrastructure â†’ Presentation** layers
-   **Domain**: Pure TypeScript, no external dependencies
-   **Usecases**: Orchestrate business logic using repositories (ports)
-   **Infrastructure**: Implement repositories using Supabase
-   **Presentation**: Next.js UI, React Query hooks for server state, Zustand for UI state only
-   Data flow: **UI â†’ React Query hooks â†’ usecases â†’ repositories â†’ Supabase**
-   **SCSS variables** from `styles/variables/*` only; no hardcoded values
-   **Accessibility** utilities from `shared/a11y/`
-   Never call Supabase directly from UI

## Output Format

1. **Understanding the Requirements** â€” restate goal; confirm scope/non-goals
2. **Architecture Review** â€” fit vs. rules (Clean Architecture, layer separation, React Query + Zustand, SCSS variables, Supabase usage)
3. **Design Questions** â€” clarifying questions (edge cases, UX, data, failure modes)
4. **Alternative Approaches** â€” 2â€“3 viable options with pros/cons
5. **Recommendation** â€” chosen approach + why
6. **Implementation Plan** â€” step-by-step, minimal diffs, files to touch, layer separation notes
7. **Testing Strategy** â€” **Define Test Contract** (units to test: domain/usecases/reusable UI components, edges, mocks)
8. **Potential Issues** â€” risks & mitigations (perf, privacy, regressions, rollout)
9. **Next Steps** â€” who/what is needed to proceed (e.g., "tests: approved" gate)

## Guardrails

-   **No code** (only reasoning, plans, and questions).
-   Prefer **Clean Architecture layer separation** if ambiguous.
-   Aim for **minimal diffs**; list exact files you would modify.
-   If the task is trivial (copy/color/style tweak), propose a **Simple Fix** path.

## ðŸ”€ Quick Mode (trivial tasks â‰¤ ~5 LOC)

-   **Simple Fix**: 1â€“2 lines on what to change
-   Files to touch (max 2)
-   One-liner test (if applicable)
-   Confirm no business logic / infra change
