---
name: "Ask Before Coding"
description: "Discuss and validate an approach before any implementation. No code output."
tags: ["design", "architecture", "planning", "tdd", "review", "perifit"]
# Reusable prompt template (not a command)
---

# Ask Before Coding

Use this when you want to **discuss and validate** an approach _before_ implementing it.  
**Do NOT write any production code yet.** We only analyze, question, and outline.

## Inputs (fill below)

- **What I want to implement / problem to solve:** ‚Ä¶
- **Context / constraints:** (deadlines, platforms, legacy, PII/RGPD, offline, etc.)
- **Existing modules touched:** (providers, services, helpers, slices, screens)
- **User impact & success signals:** ‚Ä¶
- **Open questions / uncertainties:** ‚Ä¶

## Consider Perifit Pump rules

- DI via **Providers**; no ad-hoc singletons.
- **Helpers** = pure (no I/O). **Services** own side-effects (BLE, network, storage).
- Event flow: **BLE ‚Üí handlers ‚Üí EventService ‚Üí helpers ‚Üí Redux ‚Üí UI (selectors)**.
- Navigation via **NavigationHelper**; global modals via **modalReducer**.
- **Design System only**; no inline styles / no hardcoded tokens.
- Settings via centralized module (no direct AsyncStorage).
- i18n with **Resx** (edit **en.json** only).

## Output Format

1. **Understanding the Requirements** ‚Äî restate goal; confirm scope/non-goals
2. **Architecture Review** ‚Äî fit vs. rules (DI, Services/Helpers, events, Redux, DS, Settings)
3. **Design Questions** ‚Äî clarifying questions (edge cases, UX, data, failure modes)
4. **Alternative Approaches** ‚Äî 2‚Äì3 viable options with pros/cons
5. **Recommendation** ‚Äî chosen approach + why
6. **Implementation Plan** ‚Äî step-by-step, minimal diffs, files to touch, wiring notes
7. **Testing Strategy** ‚Äî **Define Test Contract** (units to test, edges, mocks, selectors)
8. **Potential Issues** ‚Äî risks & mitigations (perf, privacy, regressions, rollout)
9. **Next Steps** ‚Äî who/what is needed to proceed (e.g., ‚Äútests: approved‚Äù gate)

## Guardrails

- **No code** (only reasoning, plans, and questions).
- Prefer **event-driven separation** if ambiguous.
- Aim for **minimal diffs**; list exact files you would modify.
- If the task is trivial (copy/color/i18n key), propose a **Simple Fix** path.

## üîÄ Quick Mode (trivial tasks ‚â§ ~5 LOC)

- **Simple Fix**: 1‚Äì2 lines on what to change
- Files to touch (max 2)
- One-liner test (if applicable)
- Confirm no business logic / infra change
