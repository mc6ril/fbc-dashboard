---
Generated: 2025-01-27 14:30:22
Main Ticker: 22
Ticket Number: 25
---

# Build catalog page UI with product list, create, and update

-   Type: Feature
-   Priority: High
-   Story Points: 5
-   Labels: ui, catalog, products, forms, components
-   Git Branch: feat/fbc-25-catalog-page-ui

## Description

Build the complete catalog page UI that allows users to visualize their product list, add new products, and update existing products. The catalog page should follow the same patterns as the Activities page, providing a consistent user experience across the dashboard.

**Current state:**

-   Catalog page exists at `/dashboard/catalog` but is just a placeholder
-   `useProducts` hook exists for listing products
-   `useCreateProduct` and `useUpdateProduct` mutation hooks exist (from ticket #24)
-   No UI components for product management yet

**Business requirement:**

-   Users need to view all products in a table format
-   Users need to add new products to the catalog
-   Users need to edit existing product information (name, type, coloris, pricing, stock, weight)
-   Product management should be accessible and follow the same UX patterns as Activities

## User Story

As a user, I want to view, add, and update products in the catalog so that I can manage my product inventory and pricing information.

## Acceptance Criteria

### Components

-   [ ] Create `ProductsTable` component in `src/presentation/components/catalog/ProductsTable/`
    -   Displays products in a table format
    -   Shows: name, type, coloris, unitCost, salePrice, stock, weight
    -   Includes edit action button for each product row
    -   Handles loading state (shows loading indicator)
    -   Handles error state (displays error message)
    -   Handles empty state (shows message when no products)
    -   Uses SCSS module for styling
    -   Follows accessibility guidelines (ARIA labels, semantic HTML, table structure)
    -   Uses `React.memo` for performance
-   [ ] Create `ProductForm` component in `src/presentation/components/catalog/ProductForm/`
    -   Reusable form for both create and edit modes
    -   Fields:
        -   name (text input, required)
        -   type (select with ProductType enum options, required)
        -   coloris (text input, required)
        -   unitCost (number input, required, > 0)
        -   salePrice (number input, required, > 0)
        -   stock (number input, required, >= 0)
        -   weight (number input, optional, > 0 if provided)
    -   Validates inputs before submission
    -   Displays validation errors accessibly
    -   Uses SCSS module for styling
    -   Follows accessibility guidelines (labels, error messages, ARIA attributes)
    -   Uses `useCallback` for event handlers
-   [ ] Update `CatalogPage` component in `src/app/dashboard/catalog/page.tsx`
    -   Fetches products using `useProducts` hook
    -   Displays `ProductsTable` with products data
    -   Includes "Add Product" button linking to `/dashboard/catalog/new`
    -   Handles loading and error states
    -   Uses SCSS module for styling (create `page.module.scss`)
    -   Follows same structure as Activities page
-   [ ] Create `NewProductPage` component in `src/app/dashboard/catalog/new/page.tsx`
    -   Uses `ProductForm` component in create mode
    -   Uses `useCreateProduct` mutation hook
    -   Handles form submission
    -   Redirects to catalog page on success using Next.js router
    -   Displays success feedback accessibly (aria-live)
    -   Displays error feedback accessibly (role="alert")
    -   Uses SCSS module for styling (create `page.module.scss`)
-   [ ] Create `EditProductPage` component in `src/app/dashboard/catalog/[id]/edit/page.tsx`
    -   Gets product ID from route params
    -   Fetches product by ID (may need `getProductById` usecase/hook - check if exists)
    -   Uses `ProductForm` component in edit mode with pre-filled data
    -   Uses `useUpdateProduct` mutation hook
    -   Handles form submission
    -   Redirects to catalog page on success
    -   Displays success/error feedback accessibly
    -   Handles loading and error states for product fetch
    -   Uses SCSS module for styling (create `page.module.scss`)

### Component Conventions

-   [ ] All components follow project conventions:
    -   Arrow function with export default
    -   Props typed with `type` (not `interface`)
    -   Use `React.memo` for expensive components (ProductsTable)
    -   Use `useCallback` for event handlers passed as props
    -   Use `useMemo` for expensive calculations
    -   No inline functions in render methods

### Styling

-   [ ] Create `src/app/dashboard/catalog/page.module.scss` with styles following BEM methodology
-   [ ] Create `src/app/dashboard/catalog/new/page.module.scss` with styles
-   [ ] Create `src/app/dashboard/catalog/[id]/edit/page.module.scss` with styles
-   [ ] Create `src/presentation/components/catalog/ProductsTable/ProductsTable.module.scss` with styles
-   [ ] Create `src/presentation/components/catalog/ProductForm/ProductForm.module.scss` with styles
-   [ ] All styles use variables from `styles/variables/*` (no hardcoded values)
-   [ ] All class names use kebab-case with BEM methodology
-   [ ] Follow same styling patterns as Activities page

### Accessibility

-   [ ] All interactive elements have proper ARIA labels
-   [ ] Form fields have associated `<label>` elements with `htmlFor` and `id`
-   [ ] Error messages use `role="alert"` for screen reader announcements
-   [ ] Success messages use `aria-live="polite"` for announcements
-   [ ] Table has proper semantic structure with `<thead>`, `<tbody>`, `<th>` with `scope` attributes
-   [ ] Buttons have descriptive `ariaLabel` props
-   [ ] Form validation errors are associated with fields using `aria-describedby`
-   [ ] Loading states are announced to screen readers

## Technical Considerations

### Architecture Layers

-   **Presentation layer**: Build UI components and pages
-   **Hooks layer**: Use existing hooks (`useProducts`, `useCreateProduct`, `useUpdateProduct`)

### Component Structure

Follow the same patterns as Activities page:

-   **CatalogPage** (`/dashboard/catalog`):

    -   Header with title and "Add Product" button
    -   ProductsTable component
    -   Loading and error states

-   **NewProductPage** (`/dashboard/catalog/new`):

    -   ProductForm component (create mode)
    -   Form submission via useCreateProduct mutation
    -   Success redirect to catalog page

-   **EditProductPage** (`/dashboard/catalog/[id]/edit`):
    -   Fetch product by ID (check if `getProductById` usecase/hook exists)
    -   ProductForm component (edit mode) with pre-filled data
    -   Form submission via useUpdateProduct mutation
    -   Success redirect to catalog page

### Product Form Fields

-   **name** (text, required): Product name/description
-   **type** (select, required): ProductType enum (SAC_BANANE, POCHETTE_ORDINATEUR, etc.)
-   **coloris** (text, required): Color variation
-   **unitCost** (number, required, > 0): Cost per unit
-   **salePrice** (number, required, > 0): Selling price per unit
-   **stock** (number, required, >= 0): Current stock level
-   **weight** (number, optional, > 0 if provided): Weight in grams

### Form Validation

-   Validate inputs before submission (client-side)
-   Display validation errors accessibly
-   Usecases will also validate (server-side validation)
-   Show field-level errors with `aria-describedby`

### Navigation

-   Use Next.js `Link` component for navigation
-   Use Next.js `useRouter` for programmatic navigation (redirects)
-   Redirect to `/dashboard/catalog` after successful create/update

### Error Handling

-   Display mutation errors accessibly
-   Display fetch errors accessibly
-   Don't swallow errors
-   Provide user-friendly error messages

## Definition of Done

-   [ ] `ProductsTable` component created with proper styling and accessibility
-   [ ] `ProductForm` component created with proper styling and accessibility
-   [ ] `CatalogPage` displays products list with "Add Product" button
-   [ ] `NewProductPage` allows creating new products
-   [ ] `EditProductPage` allows editing existing products
-   [ ] All components follow project conventions (arrow functions, type props, memoization)
-   [ ] All styles use variables from `styles/variables/*` (no hardcoded values)
-   [ ] All components are accessible (ARIA labels, semantic HTML, error announcements)
-   [ ] All pages handle loading and error states
-   [ ] Build/lint green
-   [ ] No TypeScript errors
-   [ ] Code review approved

## Related Components

### Presentation - Components

-   `src/presentation/components/catalog/ProductsTable/ProductsTable.tsx` - Products table component (new)
-   `src/presentation/components/catalog/ProductsTable/ProductsTable.module.scss` - Table styles (new)
-   `src/presentation/components/catalog/ProductForm/ProductForm.tsx` - Product form component (new)
-   `src/presentation/components/catalog/ProductForm/ProductForm.module.scss` - Form styles (new)
-   `src/app/dashboard/catalog/page.tsx` - Catalog page (update)
-   `src/app/dashboard/catalog/page.module.scss` - Catalog page styles (new)
-   `src/app/dashboard/catalog/new/page.tsx` - New product page (new)
-   `src/app/dashboard/catalog/new/page.module.scss` - New product page styles (new)
-   `src/app/dashboard/catalog/[id]/edit/page.tsx` - Edit product page (new)
-   `src/app/dashboard/catalog/[id]/edit/page.module.scss` - Edit product page styles (new)

### Presentation - Hooks (Dependencies)

-   `src/presentation/hooks/useProducts.ts` - Product hooks (`useProducts`, `useCreateProduct`, `useUpdateProduct`) - from tickets #24
-   `src/presentation/hooks/queryKeys.ts` - Query keys (reference)

### UI Components (Design System)

-   `src/presentation/components/ui/Button` - Button component
-   `src/presentation/components/ui/Input` - Input component
-   `src/presentation/components/ui/Select` - Select component
-   `src/presentation/components/ui/Heading` - Heading component
-   `src/presentation/components/ui/Text` - Text component
-   `src/presentation/components/ui/Link` - Link component

### Reference Components (Similar Patterns)

-   `src/app/dashboard/activities/page.tsx` - Activities page (reference for structure)
-   `src/presentation/components/activities/ActivitiesTable/ActivitiesTable.tsx` - Activities table (reference)
-   `src/presentation/components/activities/ActivityFilters/ActivityFilters.tsx` - Activity filters (reference for form patterns)

## Dependencies

-   **Ticket #23**: `createProduct` and `updateProduct` usecases must be implemented
-   **Ticket #24**: `useCreateProduct` and `useUpdateProduct` mutation hooks must be implemented
-   Product domain model (already exists)
-   UI components from design system (already exist)
-   React Query setup (already exists)

## Notes

-   This ticket focuses only on the UI/presentation layer
-   Check if `getProductById` usecase/hook exists for EditProductPage, create if needed
-   Follow the same patterns as Activities page for consistency
-   All form fields should be properly labeled and accessible
-   Consider adding loading skeletons for better UX (optional enhancement)
