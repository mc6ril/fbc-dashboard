---
Generated: 2025-11-16 00:00:00
Ticket Number: 7
---

# Define domain models: Activity, Product, StockMovement

-   Type: Feature
-   Priority: High
-   Story Points: 5
-   Labels: domain, modeling, clean-architecture
-   Git Branch: feat/fbc-7-define-domain-models

## Description

Introduce foundational domain types for the Activity Tracking feature. Define business meaning and constraints for:

-   Activity: id, date, type (CREATION, SALE, STOCK_CORRECTION, OTHER), productId?, quantity (+/-), amount, note
-   Product: id, name, type/category, unitCost, salePrice, stock
-   StockMovement: id, productId, quantity (+/-), source (CREATION, SALE, INVENTORY_ADJUSTMENT)

Document rules and invariants in `core/domain/` to remain pure TypeScript with no external dependencies.

## User Story

As a developer, I need clear domain models so that all layers manipulate consistent and validated business objects.

## Acceptance Criteria

-   Types created in `src/core/domain/` with concise JSDoc describing business meaning.
-   No external imports in domain files (purity maintained).
-   Enumerations defined for ActivityType and StockMovementSource.
-   Validation utilities for basic invariants (e.g., quantity sign meaning) documented in domain or `core/domain/validation.ts`.

## Technical Considerations

-   Keep the domain pure; do not import React/Supabase.
-   Consider using branded types or value objects where beneficial.
-   Include minimal helper functions for non-obvious rules (e.g., isNegativeForSale).

## Definition of Done

-   Domain types exported and used by subsequent ports/usecases.
-   Unit tests added under `__tests__/core/domain/` for rules and edge cases.
-   Lint/build green.

## Related Components

-   `src/core/domain/*`
