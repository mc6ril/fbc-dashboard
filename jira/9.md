---
Generated: 2025-11-16 00:00:00
Ticket Number: 9
---

# Implement core usecases for activities and analytics

-   Type: Feature
-   Priority: High
-   Story Points: 8
-   Labels: usecases, business-logic, activities, analytics
-   Git Branch: feat/fbc-9-implement-core-usecases

## Description

Create usecases that orchestrate business logic for the activity tracking domain:

-   addActivity()
-   listActivities()
-   updateActivity()
-   computeStockFromActivities()
-   computeProfit()

Usecases must be pure and depend only on repository ports.

## User Story

As a product user, I want consistent activity operations and accurate derived metrics so that I can trust the dashboard and reports.

## Acceptance Criteria

-   Usecases live in `src/core/usecases/` and accept repository parameters (ports).
-   No direct Supabase/React imports; return domain data or computed results.
-   Edge cases handled (e.g., negative quantity for sales, zero-quantity validations).
-   Errors are thrown meaningfully and documented in JSDoc.

## Technical Considerations

-   Use strict TypeScript typing; no `any`.
-   Ensure computeStockFromActivities derives current stock per product when needed.
-   Ensure computeProfit accounts for unit cost and sale price over a period (stub period args if needed).

## Definition of Done

-   Unit tests for each usecase under `__tests__/core/usecases/` with mocks for ports.
-   Lint/build green.

## Related Components

-   `src/core/usecases/*`
